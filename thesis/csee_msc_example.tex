%% Example document for the eis_msc_thesis document class. Compile with
%% pdfLaTeX or LaTeX.
%%
%% pdflatex csee_msc_example.tex
%% bibtex csee_msc_example
%% makeglossaries csee_msc_example.glo
%%
%% rm -f *.acn *.acr *.alg *.aux *.blg *.dvi *.glg *.glo *.gls *.ist *.log *.out *.toc
%%
%% Created: April 7, 2004, by Johan Carlson
%% Last modified: June 7, 2009, by Johan Carlson

%% Pick one of the following depending on the language of the report, and if
%% you want twosided or onesided print.
%% Also change language definition after \begin{document}

% English, twosided
\documentclass[12pt,a4paper,openright,final,twoside,en]{csee_msc_thesis}

% English, onesided
%\documentclass[12pt,a4paper,openright,final,oneside,en]{csee_msc_thesis}

% Swedish, twosided
%\documentclass[12pt,a4paper,openright,final,twoside,sv]{csee_msc_thesis}

% Swedish, onesided
%\documentclass[12pt,a4paper,openright,final,oneside,sv]{csee_msc_thesis}

%%==================================================================
%% Class options specific to this class
%%==================================================================
%%   en, sv  - Swedish or English
%%   parskip - Use blank row instead of indentation for
%%             new paragraphs
%%==================================================================

%% These packages are not required in general,
%% only for some examples in this document.
\usepackage{fancybox}
\usepackage{listings}
\lstset{basicstyle=\ttfamily,
  showstringspaces=false,
  commentstyle=\color{red},
  keywordstyle=\color{blue},
  basicstyle=\ttfamily,
  columns=fullflexible,
  keepspaces=true,
}

\usepackage[style=numeric,backend=biber]{biblatex}
\addbibresource{thesisreferences.bib}

\usepackage{amsmath}

\usepackage{xargs} % Use more than one optional parameter in a new commands
\usepackage[pdftex,dvipsnames]{xcolor} % Colored text etc.

% TODO tags
\usepackage[colorinlistoftodos,prependcaption,textsize=tiny]{todonotes}
\newcommandx{\unsure}[2][1=]{\todo[linecolor=red,backgroundcolor=red!25,bordercolor=red,#1]{#2}}
\newcommandx{\change}[2][1=]{\todo[linecolor=blue,backgroundcolor=blue!25,bordercolor=blue,#1]{#2}}
\newcommandx{\info}[2][1=]{\todo[linecolor=OliveGreen,backgroundcolor=OliveGreen!25,bordercolor=OliveGreen,#1]{#2}}
\newcommandx{\improvement}[2][1=]{\todo[linecolor=Plum,backgroundcolor=Plum!25,bordercolor=Plum,#1]{#2}}
\newcommandx{\thiswillnotshow}[2][1=]{\todo[disable,#1]{#2}}

% Link colors
\usepackage[hang, flushmargin]{footmisc}

\definecolor{darkblue}{RGB}{0,0,150}
\usepackage{url}
\usepackage[pdfpagemode={UseOutlines},bookmarks=true,bookmarksopenlevel=0,bookmarksnumbered=true,plainpages=false,colorlinks,linkcolor={black},citecolor={darkblue},urlcolor={darkblue},pdfstartview={FitV},unicode,breaklinks=true,pdfpagelabels]{hyperref}
\usepackage{footnotebackref}

% Inkscape plots
\graphicspath{{Figures/}}

% Unicode symbols
\usepackage{pmboxdraw}

% Citaion needed \cite{NEEDED}
\usepackage{ifthen}
\let\oldcite=\cite
\renewcommand\cite[1]{\ifthenelse{\equal{#1}{NEEDED}}{\textcolor{red}{[citation~needed]}}{\oldcite{#1}}}

% Abbreviations and glossary
\usepackage[automake,entrycounter,acronym,toc,section=section,numberedsection=autolabel]{glossaries-extra}
\renewcommand{\glossarysection}[2][\theglstoctitle]{%
  \cleardoublepage
  \fancyhf{}
  \renewcommand{\thechapter}{}
  \renewcommand{\chaptername}{Appendix C}
  \chapter[\sc #2]{#2}
  \fancyhead[RE]{\sc #1}
  \fancyhead[LE]{\sc \thepage}
  \fancyhead[RO]{\sc \thepage}
  \fancyhead[LO]{\sc{\nouppercase{\rightmark}}}
  \renewcommand{\thesection}{\Alph{chapter}.\arabic{section}}
  \renewcommand{\theequation}{\Alph{chapter}.\arabic{equation}}
  \renewcommand{\thefigure}{\Alph{chapter}.\arabic{figure}}
  \renewcommand{\thetable}{\Alph{chapter}.\arabic{table}}
}
\makeglossaries
\setabbreviationstyle[acronym]{long-postshort-user}
\glssetcategoryattribute{acronym}{nohyperfirst}{true}
\renewcommand*{\glsxtruserparen}[2]{
  \glsxtrfullsep{#2}
  (\glshyperlink[#1]{#2})
}
\input{glossary.tex}

% \degree
\usepackage{gensymb}

% Plots
\usepackage{float}
\usepackage{graphicx}
\usepackage{tikz,pgf,pgfplots,pgfplotstable}
\usetikzlibrary{matrix}
\usepgfplotslibrary{groupplots}
\pgfplotsset{compat=1.9}
\usepackage{csvsimple,longtable,booktabs}
\usepackage{pdfpages}

% Tables
\usepackage{array,booktabs,ragged2e}
\usepackage[font=small,labelfont=bf,tableposition=top]{caption}
\DeclareCaptionLabelFormat{andtable}{#1~#2  \&  \tablename~\thetable}

\newcolumntype{R}[1]{>{\RaggedLeft\arraybackslash}p{#1}}

\newcommand{\plotheight}{1.5\linewidth}
\newcommand{\plotwidth}{\linewidth}

\newcommand{\vo}{\vec{o}\@ifnextchar{^}{\,}{}}

% File line count
\usepackage{ifthen}

\newcounter{FileLines}
\newboolean{RestFile}
\newcommand{\FileLine}{}
\newread\File

\newcommand{\CountLinesInFile}[2]
{
  \setboolean{RestFile}{true}
  \setcounter{FileLines}{0}

  \openin\File=#1
  \whiledo{\boolean{RestFile}}
  {
    \ReadNextLine{\File}
    \ifthenelse{\boolean{RestFile}}{
      \stepcounter{FileLines}
    }{}
  }
  \closein\File
}

\newcommand{\ReadNextLine}[1]{
  \ifthenelse{\boolean{RestFile}}{
    \read#1 to \FileLine
    \ifeof#1\setboolean{RestFile}{false}
    \else % if last line already is read, EOF appears here
    \fi
  }{}
}

\begin{document}

%%==================================================================
%% Define variables here
%%==================================================================

\def\thesistitle{Real-time Thermal Flow\\Predictions for Data Centers\par\normalsize\vspace{1\baselineskip} Using the Lattice Boltzmann Method on Graphics Processing Units\\ for Predicting Thermal Flow in Data Centers
%\par\tiny\ldots or how i learnt to stop worrying and love lattice-boltzmann.
}
\def\theauthor{Johannes \ Sjölund}
\def\theaddress{Luleå University of Technology\\
            Dept.\ of Computer Science, Electrical and Space Engineering}

% Define the English abstract
\def\theabstract{\input{Abstract/abstract.tex}}
\def\thepreface{\input{Preface/preface.tex}}
\def\thedate{Version: \theclassversion , \theclassdate}

% Use this if you want a Swedish abstract
\def\theswedishabstract{\input{SweAbstract/sweabstract.tex}}

%%==================================================================
%% Generate preamble pages here (This should not need any changes)
%%==================================================================
\startpreamble
  {\thesistitle}
  {\theauthor}
  {\theaddress}
  {\theabstract}
  {\thepreface}
  {\thedate}
  {\theswedishabstract} % use this for Swedish abstract, leave empty for English

%%==================================================================
%% Start including the chapters
%%==================================================================
% First argument is the "running titles", second is the chapter name.
\makechapter{Introduction}{Introduction\label{ch:introduction}}
\input{Chapter_Introduction/chapter_introduction.tex}

\makechapter{Background}{Background\label{ch:background}}
\input{Chapter_Background/chapter_background.tex}

\makechapter{Remote Server Deployment}{Remote Server Deployment\label{ch:deployment}}
\input{Chapter_Deployment/chapter_deployment.tex}

\makechapter{Implementation}{Implementation\label{ch:improvements}}
\input{Chapter_Code/chapter_code.tex}

\makechapter{Modeling a Data Center Module}{Modeling a Data Center Module\label{ch:modeling}}
\input{Chapter_Modeling/chapter_modeling.tex}

\makechapter{Model Validation}{Model Validation\label{ch:validation}}
\input{Chapter_Validation/chapter_validation.tex}

\makechapter{Conclusions}{Conclusions\label{ch:results}}
\input{Chapter_Results/chapter_results.tex}


%%==================================================================
%% Include any appendices here.
%%==================================================================
\appendix % This command initializes the appendix part, Don't change!

% Include appendix A, add more if needed
\makeappendix{Appendix A}{Deploying RAFSINE on \mbox{Ubuntu 16.04 LTS}\label{app:deploying}}
\input{Appendices/appendix_virtualgl.tex}

\makeappendix{Appendix B}{Plots and Charts\label{app:plots}}
\input{Appendices/appendix_plots.tex}

\printglossary[type=\acronymtype]
\printglossary[type=main]

%%==================================================================
%% Include bibliography references here
%% Replace the "thesisreferences" with your
%% own reference database
%%==================================================================

\fancyhead[LO]{}%
\fancyhead[RE]{}%
\fancyhead[LE]{\thepage}%
\fancyhead[RO]{\thepage}
%\bibliography{thesisreferences}
\printbibliography

\end{document}
